{% extends "base.html" %}
{% block title %}Deals & Commission{% endblock %}

{% block content %}
<div class="max-w-5xl mx-auto py-8 text-white">
  <h1 class="text-2xl font-semibold mb-4">Deals & Commission</h1>

  {% if deals %}
    <table class="w-full text-xs border-collapse">
      <thead>
        <tr class="border-b border-white/20 text-[11px] text-gray-300">
          <th class="text-left py-2 pr-2">Listing</th>
          <th class="text-left py-2 pr-2">Agreed price</th>
          <th class="text-left py-2 pr-2">Commission %</th>
          <th class="text-left py-2 pr-2">Commission (pence)</th>
          <th class="text-left py-2 pr-2">Status</th>
        </tr>
      </thead>
      <tbody>
        {% for deal in deals %}
          <tr class="border-b border-white/10">
            <td class="py-2 pr-2">
              {{ deal.introduction.listing.listing_code }} â€“ {{ deal.introduction.listing.title }}
            </td>
            <td class="py-2 pr-2 text-gray-200">
              {{ deal.agreed_price or "n/a" }}
            </td>
            <td class="py-2 pr-2 text-gray-200">
              {{ "%.1f"|format(deal.broker_commission_percent or 0.0) }}%
            </td>
            <td class="py-2 pr-2 text-gray-200">
              {{ deal.broker_commission_amount or 0 }}
            </td>
            <td class="py-2 pr-2 text-gray-100">
              {{ deal.status }}
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p class="text-xs text-gray-400">No deals recorded yet.</p>
  {% endif %}
</div>
{% endblock %}
