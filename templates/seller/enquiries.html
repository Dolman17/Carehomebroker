{% extends "base.html" %}
{% block title %}Seller Enquiries{% endblock %}

{% block content %}
<div class="mb-6">
  <h1 class="text-xl font-semibold text-kaijoYellow mb-1">Buyer Enquiries</h1>
  <p class="text-xs text-white/70">View enquiries across all of your listings</p>
</div>

{% if enquiries %}
  <div class="space-y-4">
    {% for e in enquiries %}
      <div class="bg-white/5 border border-white/10 rounded-lg p-4 backdrop-blur-sm shadow-[0_0_20px_rgba(0,0,0,0.35)]">

        <p class="text-[11px] text-white/50 font-mono">
          Ref: {{ e.listing.listing_code }}
        </p>

        <p class="font-semibold text-sm text-white mt-1">{{ e.listing.title }}</p>

        <p class="text-[11px] text-white/60 mt-1">
          Received: {{ e.created_at.strftime('%d %b %Y') }}
        </p>

        <p class="text-sm mt-3 border-l-4 border-kaijoYellow/80 pl-3 text-white/90">
          {{ e.message }}
        </p>

        <div class="mt-3 flex flex-wrap items-center gap-2 text-xs">

          <span class="px-2 py-1 rounded
            {% if e.status == 'new' %} bg-kaijoPink/30 text-kaijoPink
            {% elif e.status == 'read' %} bg-white/10 text-white/70
            {% elif e.status == 'archived' %} bg-white/5 text-white/40
            {% endif %}">
            {{ e.status|title }}
          </span>

          <form method="post" action="{{ url_for('seller_set_enquiry_status', enquiry_id=e.id) }}">
            <input type="hidden" name="status" value="read">
            <button class="border border-white/20 px-3 py-1 rounded text-white/80 hover:bg-white/10 hover:text-kaijoYellow transition">
              Mark Read
            </button>
          </form>

          <form method="post" action="{{ url_for('seller_set_enquiry_status', enquiry_id=e.id) }}">
            <input type="hidden" name="status" value="archived">
            <button class="border border-white/20 px-3 py-1 rounded text-white/80 hover:bg-white/10 hover:text-kaijoPink transition">
              Archive
            </button>
          </form>
        </div>

      </div>
    {% endfor %}
  </div>
{% else %}
  <p class="text-sm text-white/70">No enquiries yet.</p>
{% endif %}
{% endblock %}
